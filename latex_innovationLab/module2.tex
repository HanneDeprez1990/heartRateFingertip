%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\deelmetoef{Module 2}{Apps maken met MIT App Inventor 2}{Module 2. Apps maken met MIT App Inventor 2}{Oplossingen module 2}{Oplossingen module 2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{samenvatting}
De hartslagmonitor die we gaan maken is een smartphone app. MIT, een bekende universiteit in de Verenigde Staten, ontwikkelde een programmeeromgeving waarmee je zeer eenvoudig apps kan maken en testen. In dit hoofdstuk bespreken we de belangrijkste structuren voor het maken van een app. Ook in andere programmeertalen en -omgevingen zal je deze structuren kunnen gebruiken.
\end{samenvatting}
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIT App Inventor 2}
\label{sec:Mod2_Sec1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
Met behulp van MIT App Inventor 2 kan je zelf apps maken. Alles wat je nodig hebt, is een computer met wifi-verbinding en een smartphone die met hetzelfde wifi-netwerk geconnecteerd is.

\subsection{Maken van de app}

Surf naar de website \url{http://appinventor.mit.edu/explore/} en klik rechtsboven op create apps! Je zal moeten inloggen met een google account. Als je nog geen google account hebt, kan je die aanmaken via \url{https://accounts.google.com/signup}. Na succesvol aanmelden kom je op de pagina met je projecten terecht. 

Cre\"eer een nieuw project, noem het bv \textquotedblleft HelloWorld\textquotedblright, en klik erop om het project te openen. 

Je komt op het startscherm terecht. Er zijn twee \textquoteleft views\textquoteright. De eerste view is de \emph{designer view}, weergegeven in Figuur \ref{fig:view_designer}.

\figuurmetlabel[\label{fig:view_designer}]{width=.8\linewidth}{module2/overviewAI}{Designer view in MIT App Inventor 2. Overschakelen tussen views doe je rechtsbovenaan (blauwe rechthoek). Tabs zijn aangeduid in rood.}

Hierin kan je de componenten toevoegen die je zal zien op het scherm tijdens het uitvoeren van je app. In de tab \emph{Palette} (links) vind je alle componenten die je kan toevoegen. Dit is bijvoorbeeld een knop (Engels: button), een label, een afbeelding (Engels: image) enz. Je voegt componenten toe door ze vast te nemen en ze naar het scherm van de afgebeelde smartphone te slepen. Componenten kan je groeperen m.b.v. \texttt{HorizontalArrangement}, \texttt{VerticalArrangement} of \texttt{TableArrangement}. Componenten kan je een naam geven onder de tab \emph{Components} door de component aan te klikken en op \emph{Rename} te drukken. In de tab \emph{Properties} (rechts) kan je de eigenschappen van de component veranderen: Welke tekst moet op de knop staan? Wat is de lettergrootte? Wil je de tekst in een andere kleur weergeven? ... Als je wilt weten wat een component doet, kan je het vraagteken naast de component in de tab \emph{Palette} aanklikken voor een korte uitleg.

De andere view is de \emph{blocks view}, weergegeven in Figuur \ref{fig:view_block}.

\figuurmetlabel[\label{fig:view_block}]{width=.8\linewidth}{module2/uitlegAI_blocks}{Block view in MIT App Inventor 2.}

Hierin voeg je de functionaliteit toe aan je app. Wat moet er gebeuren als je op de knop drukt? Misschien wil je de tekst in een label aanpassen, of wil je een andere afbeelding tonen. Er kan veel; wat je implementeert, hangt af van je verbeelding.

\begin{opdracht}{Experimenteren met MIT App Inventor 2}
Ga na wat je allemaal kan doen in de programmeeromgeving. Welke componenten bestaan er allemaal? Welke eigenschappen kan je aanpassen?

Probeer een eerste app te maken. De app bevat een knop met de tekst \textquotedblleft Zeg hallo\textquotedblright, en een label zonder tekst. Als je op de knop drukt, moet de tekst \textquotedblleft Hello world!\textquotedblright \ in het label verschijnen. Dit \textquotedblleft Hello world!\textquotedblright-programma is een van de simpelste programmatjes die je kan schrijven. Wanneer programmeurs een nieuwe programmeertaal aanleren, schrijven ze steeds \textquotedblleft Hello world!\textquotedblright-programma om te leren werken met de nieuwe taal, die we met een geleerder woord syntax noemen.
\end{opdracht}

\subsection{Testen en uitvoeren van de app}
Om de app te testen moet je de MIT App Inventor 2 Companion App (te vinden in de Google Play Store) installeren op je smartphone. 
Zorg ervoor dat je computer en smartphone met hetzelfde wifi-netwerk verbonden zijn. 
Klik op connect, rechtsboven in Figuur \ref{fig:view_designer}, en kies de eerste optie \textquotedblleft AI companion\textquotedblright. Er verschijnt een QR-code die je kan scannen met je smartphone met de MIT App Inventor 2 Companion App. De app opent op je smartphone, zodat je de werking van de app kan testen.

Als je smartphone geconnecteerd is via de Companion App, verandert de app op je smartphone mee wanneer je aanpassingen doet aan de componenten op het scherm. Soms werkt dit echter niet zo goed. Breek dan de connectie met de smartphone af via \texttt{Connection - reset connection} en maak de verbinding opnieuw via \texttt{Connection - AI companion}.

Als je de app die je ontworp getest hebt via de App Inventor 2 Companion App en de app aan de vereisten voldoet, kan je de app downloaden. Dan hoef je niet meer steeds de QR code te scannen als je de app wilt gebruiken. De app kan je installeren via \emph{Build - App (provide QR code for .apk)}. Door een QR code te scannen met je GSM kan je het installatie-bestand (.apk) downloaden op je smartphone. Wanneer je het .apk-bestand opent, installeert de app.

\begin{opdracht}{Good morning app}
	Toon \textquotedblleft Good morning!\textquotedblright \ in drie verschillende talen op het scherm, nl. Italiaans, Spaans en Duits.
	
	\begin{minipage}{.5\linewidth}
		\gewonefiguur{width=5cm}{module2/goedemorgenApp}
	\end{minipage}
	\begin{minipage}{.5\linewidth}
		\begin{enumerate}
			\item Cre\"eer een nieuw project.
			\item Ontwikkel de designer view:
			\begin{itemize}
				\item Welke layout?
				\item Welke componenten?
				\item Welke naam voor elke component?
				\item Welke eigenschappen voor elke component?
			\end{itemize}
			\item Ontwikkel de block view
			\begin{itemize}
				\item Indien klik op knopItaliaans: \textquotedblleft Buongiorno!\textquotedblright
				\item Indien klik op knopSpaans: \textquotedblleft Buenos dias!\textquotedblright
				\item Indien klik op knopDuits: \textquotedblleft Guten Morgen!\textquotedblright
			\end{itemize}
		\end{enumerate}
	\end{minipage}

Test de werking van je app grondig. Doet de app op elk moment wat je ervan verwacht? Indien niet: ga op zoek naar de onderliggende oorzaak. Dit proces, waarin je ongewenste fouten in de werking van de app opspoort en wegwerkt, heet \textquotedblleft debuggen \textquotedblright. Zelfs de beste programmeurs moeten hun apps debuggen. Dit is soms een frustrerend proces, maar het is helaas wel een wezenlijk onderdeel van programmeren.

\end{opdracht}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Blokken in de blocks view}
\label{sec:Mod2_Sec2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
Met MIT App Inventor 2 kan je heel gemakkelijk zelf aan de slag. De betekenis van de componenten is vaak intu\"itief duidelijk en via het vraagteken kan je extra uitleg oproepen. 

Hieronder bespreken we enkele belangrijke blokken uit de blocks view, waarvan de bedoeling misschien iets minder vanzelfsprekend is.

\subsection{Controle (control)}
De meeste programmeertalen zijn opgebouwd rond drie belangrijke controlestructuren: \textquoteleft if\textquoteright-loops om beslissingen te nemen, en \textquoteleft for\textquoteright-loops en \textquoteleft while\textquoteright-loops om herhaling in te bouwen.

\subsubsection{Beslissingen nemen: \emph{If then} blok}

\begin{minipage}{.5\linewidth}
\gewonefiguur{width=7cm}{module2/if.jpg}
\end{minipage}
\begin{minipage}{.5\linewidth}
\gewonefiguur{width=7cm}{module2/ifStructures}
\end{minipage}

\textquoteleft If\textquoteright-lussen laten toe een programma dynamisch te maken. Een \textquoteleft If\textquoteright-lus kan je vergelijken met het kiezen van een weg op een kruispunt: als een voorwaarde voldaan is (YES), ga je naar links; anders ga je rechts. 

Het testen of een voorwaarde voldaan is, gebeurt met een \texttt{Boolean} expressie.
Een \texttt{Boolean} expressie is een uitdrukking die ofwel waar of ofwel vals is.
Het resultaat van \texttt{Boolean} expressie is een \texttt{Boolean}, een variabele die maar twee waarden kan aannemen: \texttt{true} als de voorwaarde voldaan is, en \texttt{false} als de voorwaarde niet voldaan is.

Je kan kiezen om een bewerking enkel uit te voeren als een voorwaarde voldaan is (\emph{If then} blok) of de ene bewerking uit te voeren als de voorwaarde voldaan is, en een andere als de voorwaarde niet voldaan is (\emph{If then else} blok). Als je echt complexe dingen wil doen, kan je extra voorwaarden toevoegen (\emph{If then, else if then, else then} blok).

\subsubsection{Herhaling: \emph{While test} lus of \emph{for each} lus}

Voor zaken die vaak uitgevoerd moeten worden, bv. de tekst op een label laten optellen van 1 tot 100, kan je gebruik maken van een repetitie-blok, zoals een \emph{While test} lus of \emph{for each} lus.

\gewonefiguur{width=\linewidth}{module2/repititionStructures2}

Bij een \emph{for each}-lus wordt een teller (in ons voorbeeld \texttt{number}) steeds verhoogd (in ons voorbeeld met $Z$) binnen een bereik van waarden (in ons voorbeeld tussen $X$ en $Y$). Een \emph{for}-lus is ideaal om een probleem op te lossen waarbij een lus een vast aantal keer herhaald moet worden.

Een \emph{While test} lus heeft twee delen: (1) een \emph{test}-socket: \texttt{Boolean} expressie (waar of niet waar?) die getest wordt, en (2) een \emph{do}-socket: een verzameling instructies die uitgevoerd wordt zolang de \texttt{Boolean} expressie \texttt{true} is. Pas op dat je geen oneindige lussen maakt: ooit moet de \texttt{Boolean} expressie \texttt{false} worden, anders blijf je vastzitten in de \emph{while}-lus.

\subsection{Logica (Logic)}

Zoals eerder gezegd is een \texttt{Boolean} expressie een expressie die ofwel waar of ofwel vals is.
Logische operatoren (zoals \texttt{AND} en \texttt{OR}) kunnen gebruikt worden om meerdere boolean expressies samen te stellen en zo meer complexe voorwaarden te testen. 

De logische operator \texttt{AND} geeft als output waar als beide inputs waar zijn, en onwaar als een of meerdere inputs onwaar zijn. 

De logische operator \texttt{OR} geeft als output waar als minstens een van beide inputs waar is, en onwaar als beide inputs onwaar zijn.

De logische operator \texttt{NOT} geeft als output onwaar als de input waar is en geeft als output waar als de input onwaar is.

\subsection{Wiskunde (Math)}
Uiteraard kunnen bewerkingen op getallen uitgevoerd worden. Je vindt het volledige overzicht van mogelijke bewerkingen onder \emph{Blocks - Math}.

\subsection{Tekst (Text)}
Naast wiskundige bewerkingen kan je ook tekst input van de gebruiker verwerken. De mogelijke bewerkingen die je op tekst kan uitvoeren vind je onder \emph{Blocks - Text}.

\subsection{Variabelen (Variables)}
Variabelen worden gebruikt om waarden bij te houden. Een bij te houden waarde kan bv. het resultaat van een wiskunde bewerking zijn, of een tekst input van de gebruiker die je later nog wilt aanpassen. 

Belangrijk is dat er een onderscheid gemaakt wordt tussen lokale en globale variabelen, zie Figuur \ref{fig:variabele}. Globale variabelen worden aangemaakt bij de opstart van het programma en kunnen doorheen het hele programma gebruikt worden. We zouden kunnen zeggen dat je vanuit elk blok \textquotedblleft aan de globale variabele kan\textquotedblright.
Lokale variabelen worden aangemaakt binnen een blok en kunnen enkel door blokken binnen de grenzen van de lokale variabele gebruikt worden. Je \textquotedblleft kan er dus enkel aan\textquotedblright \ binnen het oranje blok zelf. Vandaar dat het blok voor een lokale variabele onderaan nog een oranje staartje heeft. Dit staartje duidt aan binnen welke grenzen \textquotedblleft je aan de variabele kan\textquotedblright.

\figuurmetlabel[\label{fig:variabele}]{width=8cm}{module2/variabelen}{Het bovenste blok toont hoe je een globale variabele kan aanmaken, die doorheen het hele programma gebruikt kan worden. Het onderste blok toont hoe je een lokale variabele kan aanmaken, die enkel toegankelijk is binnen het blok van de variabele.}

De \texttt{Get}-instructies worden gebruikt om de waarde van een variabele op te halen. De \texttt{Set}-instructie wordt gebruikt om de waarde van een variabele te wijzigen.

\subsection{Lijsten (Lists)}
Een lijst kan meerdere items met gelijkaardige data bevatten. Zo kan je bijvoorbeeld een lijst van getallen hebben, of een lijst van tekstwaarden. Als je 100 getallen moet bijhouden, is het makkelijker een lijst te gebruiken dan 100 verschillende variabelen.

Nadat een lijst wordt aangemaakt zoals in Figuur \ref{fig:lijst}, kan je extra items aan de lijst toevoegen, of er items uit verwijderen. De volledige lijst van bewerkingen die je op een lijst kan toepassen, vind je onder \emph{Blocks - list}

\figuurmetlabel[\label{fig:lijst}]{width=8cm}{module2/lijst}{Je kan een lege lijst aanmaken (boven), of een lijst aanmaken die reeds een aantal elementen bevat.}


